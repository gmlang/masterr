<!DOCTYPE html>
<!--
    So Simple Jekyll Theme 3.2.0
    Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes
    Free for personal and commercial use under the MIT license
    https://github.com/mmistakes/so-simple-theme/blob/master/LICENSE
-->
<html lang="en-US" class="no-js">
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  

  
    
    <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>The setwd Function in R | Become Great at R</title>
<meta name="generator" content="Jekyll v3.9.2" />
<meta property="og:title" content="The setwd Function in R" />
<meta name="author" content="Guangming Lang" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Previously, I wrote an article on how not to use setwd(). Today I discovered a side effect of setwd() that is really cool and useful. It turns out that when you run setwd(path), not only will it reset the working directory to path, it will also return the working directory before the reset." />
<meta property="og:description" content="Previously, I wrote an article on how not to use setwd(). Today I discovered a side effect of setwd() that is really cool and useful. It turns out that when you run setwd(path), not only will it reset the working directory to path, it will also return the working directory before the reset." />
<link rel="canonical" href="http://localhost:4000/r/the-setwd-function-in-r/" />
<meta property="og:url" content="http://localhost:4000/r/the-setwd-function-in-r/" />
<meta property="og:site_name" content="Become Great at R" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2014-10-03T00:00:00+09:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="The setwd Function in R" />
<meta name="twitter:site" content="@" />
<meta name="twitter:creator" content="@Guangming Lang" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Guangming Lang"},"dateModified":"2014-10-03T00:00:00+09:00","datePublished":"2014-10-03T00:00:00+09:00","description":"Previously, I wrote an article on how not to use setwd(). Today I discovered a side effect of setwd() that is really cool and useful. It turns out that when you run setwd(path), not only will it reset the working directory to path, it will also return the working directory before the reset.","headline":"The setwd Function in R","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/r/the-setwd-function-in-r/"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://localhost:4000/images/site-logo.png"},"name":"Guangming Lang"},"url":"http://localhost:4000/r/the-setwd-function-in-r/"}</script>
<!-- End Jekyll SEO tag -->


  

  <script>
    /* Cut the mustard */
    if ( 'querySelector' in document && 'addEventListener' in window ) {
      document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + 'js';
    }
  </script>

  <link rel="stylesheet" href="/assets/css/main.css">
  <link rel="stylesheet" href="/assets/css/skins/default.css">
  
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,400i,700,700i|Lora:400,400i,700,700i">
  <link rel="alternate" type="application/atom+xml" title="Become Great at R" href="/atom.xml">
<!-- start custom head snippets -->

<!-- insert favicons. use http://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

</head>


  <body class="layout--post  the-setwd-function-in-r">
    <nav class="skip-links">
  <h2 class="screen-reader-text">Skip links</h2>
  <ul>
    <li><a href="#primary-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    
  <div class="navigation-wrapper">
    <a href="#menu-toggle" id="menu-toggle">Menu</a>
    <nav id="primary-nav" class="site-nav animated drop">
      <ul><li><a href="/about/">About</a></li><li><a href="/r/">R</a></li><li><a href="/da/">Data Analysis</a></li><li><a href="/books/">Books</a></li><li><a href="/apps/">Apps</a></li><li><a href="/cartoon/">Cartoon</a></li></ul>
    </nav>
  </div><!-- /.navigation-wrapper -->


    <header class="masthead">
  <div class="wrap">
    
      <a href="/" class="site-logo" rel="home" title="Become Great at R">
        <img src="/images/site-logo.png" class="site-logo-img animated fadeInDown" alt="Become Great at R">
      </a>
    
    
    
      
        <div class="site-title animated fadeIn"><a href="/">Become Great at R</a></div>
      
      <p class="site-description animated fadeIn" itemprop="description">Master the R programming language</p>
    
  </div>
</header><!-- /.masthead -->


    <main id="main" class="main-content" aria-label="Content">
  <article class="h-entry">
    

    <div class="page-wrapper">
      <header class="page-header">
        
        
          <h1 id="page-title" class="page-title p-name">The setwd Function in R
</h1>
        
      </header>

      <div class="page-sidebar">
        <div class="page-author h-card p-author"><div class="author-info"><div class="author-name">
        <em>by</em> <span class="p-name">Guangming Lang</span>
      </div><ul class="author-links"><li class="author-link">
            <a class="u-url" rel="me" href="https://cabaceo.com/"><i class="fas fa-link fa-lg" title="Data Scientist"></i></a>
          </li></ul>

<span class="read-time">1 min read</span>

    <time class="page-date dt-published" datetime="2014-10-03T00:00:00+09:00"><a class="u-url" href="">October 3, 2014</a>
</time>

  </div>
</div>
        
  <h3 class="page-taxonomies-title">Categories</h3>
  
  <ul class="page-taxonomies"><li class="page-taxonomy">r</li>
  </ul>

        

      </div>

      <div class="page-content">
        <div class="e-content">
          <p>Previously, I wrote an <a href="https://masterr.org/r/how-to-work-with-files-in-r-and-improve-reproducibility/">article</a> on how not to use <code class="language-plaintext highlighter-rouge">setwd()</code>. Today I discovered a side effect of <code class="language-plaintext highlighter-rouge">setwd()</code> that is really cool and useful. It turns out that when you run <code class="language-plaintext highlighter-rouge">setwd(path)</code>, not only will it reset the working directory to path, it will also return the working directory before the reset.</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="c1"># get the default (current) working directory</span><span class="w">
</span><span class="n">getwd</span><span class="p">()</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-text" data-lang="text">## [1] "/Users/gmlang/Communities/masterr/_knitr"</code></pre></figure>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="c1"># store it</span><span class="w">
</span><span class="n">home.path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getwd</span><span class="p">()</span><span class="w">

</span><span class="c1"># create a subfolder called Projects</span><span class="w">
</span><span class="n">dir.create</span><span class="p">(</span><span class="n">file.path</span><span class="p">(</span><span class="n">home.path</span><span class="p">,</span><span class="w"> </span><span class="s2">"Projects"</span><span class="p">),</span><span class="w"> </span><span class="n">showWarnings</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">)</span><span class="w">

</span><span class="c1"># reset the Projects folder as the working directory and store the previous working directory in a variable called old  </span><span class="w">
</span><span class="n">old</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">setwd</span><span class="p">(</span><span class="n">file.path</span><span class="p">(</span><span class="n">home.path</span><span class="p">,</span><span class="w"> </span><span class="s2">"Projects"</span><span class="p">))</span><span class="w">
</span><span class="n">print</span><span class="p">(</span><span class="n">old</span><span class="p">)</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-text" data-lang="text">## [1] "/Users/gmlang/Communities/masterr/_knitr"</code></pre></figure>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="c1"># check old and home.path are the same</span><span class="w">
</span><span class="n">old</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">home.path</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-text" data-lang="text">## [1] TRUE</code></pre></figure>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="c1"># get the current working directory (this is after the reset)</span><span class="w">
</span><span class="n">getwd</span><span class="p">()</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-text" data-lang="text">## [1] "/Users/gmlang/Communities/masterr/_knitr/Projects"</code></pre></figure>

<p>We can use this side effect and <code class="language-plaintext highlighter-rouge">on.exit()</code><sup id="fnref:1" role="doc-noteref"><a href="#fn:1" class="footnote" rel="footnote">1</a></sup> to write functions that guaranttees to restore the working directory when the function exists. For example, the following function is taken from Hadley’s book
<a href="https://www.amazon.com/gp/product/B00NFODLIQ/ref=as_li_tl?ie=UTF8&amp;camp=1789&amp;creative=9325&amp;creativeASIN=B00NFODLIQ&amp;linkCode=as2&amp;tag=cabaceo-20&amp;linkId=ADGTP76QZMPYXEVL">Advanced R</a><img src="https://ir-na.amazon-adsystem.com/e/ir?t=cabaceo-20&amp;l=as2&amp;o=1&amp;a=B00NFODLIQ" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" />.</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">in_dir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">dir</span><span class="p">,</span><span class="w"> </span><span class="n">code</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">old</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">setwd</span><span class="p">(</span><span class="n">dir</span><span class="p">)</span><span class="w">
  </span><span class="nf">on.exit</span><span class="p">(</span><span class="n">setwd</span><span class="p">(</span><span class="n">old</span><span class="p">))</span><span class="w">

  </span><span class="n">force</span><span class="p">(</span><span class="n">code</span><span class="p">)</span><span class="w">
</span><span class="p">}</span></code></pre></figure>

<p>Pass the variable <code class="language-plaintext highlighter-rouge">old</code> and the function <code class="language-plaintext highlighter-rouge">getwd()</code> to it, and you get</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">in_dir</span><span class="p">(</span><span class="n">old</span><span class="p">,</span><span class="w"> </span><span class="n">getwd</span><span class="p">())</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-text" data-lang="text">## [1] "/Users/gmlang/Communities/masterr/_knitr"</code></pre></figure>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">getwd</span><span class="p">()</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-text" data-lang="text">## [1] "/Users/gmlang/Communities/masterr/_knitr"</code></pre></figure>

<div class="footnotes" role="doc-endnotes">
  <ol>
    <li id="fn:1" role="doc-endnote">
      <p>The code in <code class="language-plaintext highlighter-rouge">on.exit()</code> is run regardless of whether the function does an early return, throws an error, or simply reaches the end of the function body. <a href="#fnref:1" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
  </ol>
</div>

        </div>

        
          <div class="page-share">
  <a href="https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Flocalhost%3A4000%2Fr%2Fthe-setwd-function-in-r%2F" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" class="btn btn--facebook btn--small"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i> <span>Share</span></a>
  <a href="https://twitter.com/intent/tweet?text=The+setwd+Function+in+R%20http%3A%2F%2Flocalhost%3A4000%2Fr%2Fthe-setwd-function-in-r%2F" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" class="btn btn--twitter btn--small"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i> <span>Tweet</span></a>
  <a href="https://www.linkedin.com/shareArticle?mini=true&url=http%3A%2F%2Flocalhost%3A4000%2Fr%2Fthe-setwd-function-in-r%2F" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" class="btn btn--linkedin btn--small"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i> <span>LinkedIn</span></a>
  <a href="https://reddit.com/submit?title=The+setwd+Function+in+R&url=http%3A%2F%2Flocalhost%3A4000%2Fr%2Fthe-setwd-function-in-r%2F" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" class="btn btn--reddit btn--small"><i class="fab fa-fw fa-reddit" aria-hidden="true"></i> <span>Reddit</span></a>
</div>
        

        

        <nav class="page-pagination" role="navigation">
  
    <a class="page-previous" href="/cartoon/interpretability-vs-flexibility-of-different-models/">
      <h4 class="page-pagination-label">Previous</h4>
      <span class="page-pagination-title">
        <i class="fas fa-arrow-left"></i> Interpretability vs. Flexibility of Different Models

      </span>
    </a>
  

  
    <a class="page-next" href="/r/the-magic-of-substitute-and-deparse/">
      <h4 class="page-pagination-label">Next</h4>
      <span class="page-pagination-title">
        The Magic of Substitute and Deparse
 <i class="fas fa-arrow-right"></i>
      </span>
    </a>
  
</nav>

      </div>
    </div>
  </article>
</main>


    <footer id="footer" class="site-footer">
  <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
<div class="social-icons"><a class="social-icon" href="/atom.xml"><i class="fas fa-rss-square fa-2x" title="Feed"></i></a></div><div class="copyright">
    
      <p>&copy; 2022 Become Great at R. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://github.com/mmistakes/so-simple-theme" rel="nofollow">So Simple</a>.</p>
    
  </div>
</footer>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
  <script src="/assets/js/main.min.js"></script>
  <script src="https://use.fontawesome.com/releases/v5.0.12/js/all.js"></script>


<!-- MathJax -->

<script>
// http://docs.mathjax.org/en/latest/upgrading/v2.html
MathJax = {
  tex: {
      tags: "ams"    // eq numbering options: none, ams, all
  },
  options: {
    renderActions: {
      // for mathjax 3, handle <script "math/tex"> blocks inserted by kramdown
      find: [10, function (doc) {
        for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
          const display = !!node.type.match(/; *mode=display/);
          const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
          const text = document.createTextNode('');
          node.parentNode.replaceChild(text, node);
          math.start = {node: text, delim: '', n: 0};
          math.end = {node: text, delim: '', n: 0};
          doc.math.push(math);
        }
      }, '']
    }
  }
}
</script>

<script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>

  </body>

</html>
