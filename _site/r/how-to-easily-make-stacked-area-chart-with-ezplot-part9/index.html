<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>How to easily make stacked area chart with ezplot - Part 9 &#8211; Become Great at R</title>
<meta name="description" content="Stacked area chart isn’t something I use often. However, I see Economists use it a lot. For example, if you open the book Capital in the Twenty-First Century, you’ll find many stacked area charts. By the way, it’s a thought-provoking book. A stacked area chart is the continuous analog of a stacked bar chart. We can use it to show how different components of the whole vary over time. The reason I don’t like it is because as you move up the stacks, it becomes increasingly hard to see the patterns. Therefore, it’s very important
to choose the order in which the different components are stacked. Nonetheless, I added a function mk_areaplot() to the ezplot package. This function can save you a lot of time in case you ever need to make a stacked area chart. Let’s see how to use it.

">
<meta name="keywords" content="">


<!-- Twitter Cards -->
<meta name="twitter:title" content="How to easily make stacked area chart with ezplot - Part 9">
<meta name="twitter:description" content="Stacked area chart isn’t something I use often. However, I see Economists use it a lot. For example, if you open the book Capital in the Twenty-First Century, you’ll find many stacked area charts. By the way, it’s a thought-provoking book. A stacked area chart is the continuous analog of a stacked bar chart. We can use it to show how different components of the whole vary over time. The reason I don’t like it is because as you move up the stacks, it becomes increasingly hard to see the patterns. Therefore, it’s very important
to choose the order in which the different components are stacked. Nonetheless, I added a function mk_areaplot() to the ezplot package. This function can save you a lot of time in case you ever need to make a stacked area chart. Let’s see how to use it.

">



<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://masterr.org/images/site-logo.png">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="How to easily make stacked area chart with ezplot - Part 9">
<meta property="og:description" content="Stacked area chart isn’t something I use often. However, I see Economists use it a lot. For example, if you open the book Capital in the Twenty-First Century, you’ll find many stacked area charts. By the way, it’s a thought-provoking book. A stacked area chart is the continuous analog of a stacked bar chart. We can use it to show how different components of the whole vary over time. The reason I don’t like it is because as you move up the stacks, it becomes increasingly hard to see the patterns. Therefore, it’s very important
to choose the order in which the different components are stacked. Nonetheless, I added a function mk_areaplot() to the ezplot package. This function can save you a lot of time in case you ever need to make a stacked area chart. Let’s see how to use it.

">
<meta property="og:url" content="http://masterr.org/r/how-to-easily-make-stacked-area-chart-with-ezplot-part9/">
<meta property="og:site_name" content="Become Great at R">


<meta name="msvalidate.01" content="F608C5B05384F7B0200AC62F5BB60411">


<link rel="canonical" href="http://masterr.org/r/how-to-easily-make-stacked-area-chart-with-ezplot-part9/">
<link href="http://masterr.org/feed.xml" type="application/atom+xml" rel="alternate" title="Become Great at R Feed">


<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="http://masterr.org/assets/css/main.css">
<!-- Webfonts -->
<script src="//use.edgefonts.net/source-sans-pro:n2,i2,n3,i3,n4,i4,n6,i6,n7,i7,n9,i9;source-code-pro:n4,n7;volkhov.js"></script>

<meta http-equiv="cleartype" content="on">

<!-- HTML5 Shiv and Media Query Support -->
<!--[if lt IE 9]>
  <script src="http://masterr.org/assets/js/vendor/html5shiv.min.js"></script>
  <script src="http://masterr.org/assets/js/vendor/respond.min.js"></script>
<![endif]-->

<!-- Modernizr -->
<script src="http://masterr.org/assets/js/vendor/modernizr-2.7.1.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="http://masterr.org/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="http://masterr.org/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="http://masterr.org/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://masterr.org/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://masterr.org/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://masterr.org/images/apple-touch-icon-144x144-precomposed.png">

</head>

<body id="post">

<div class="navigation-wrapper">
	<nav role="navigation" id="site-nav" class="animated drop">
	    <ul>
      
		    
		    <li><a href="http://masterr.org/about/" >About</a></li>
		  
		    
		    <li><a href="http://masterr.org/da/" >Data Analysis</a></li>
		  
		    
		    <li><a href="http://masterr.org/r/" >R</a></li>
		  
		    
		    <li><a href="http://masterr.org/books/" >Books</a></li>
		  
		    
		    <li><a href="http://masterr.org/apps/" >Apps</a></li>
		  
		    
		    <li><a href="http://masterr.org/cartoon/" >Cartoon</a></li>
		  
        <li class="dosearch"><span><i class="fa fa-search"></i> Search</span></li>
	    </ul>
	</nav>
</div><!-- /.navigation-wrapper -->

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->

<div class="search-wrapper">
  <div class="search-form">
    <input type="text" class="search-field" placeholder="Search...">
    <button class="close-btn"><i class="fa fa-times-circle fa-2x"></i></button>
    <ul class="search-results post-list"></ul><!-- /.search-results -->
  </div><!-- /.search-form -->
</div><!-- ./search-wrapper -->

<header class="masthead">
	<div class="wrap">
        
    		<a href="http://masterr.org" class="site-logo" rel="home" title="Become Great at R"><img src="http://masterr.org/images/site-logo.png" width="200" height="200" alt="Become Great at R logo" class="animated fadeInUp"></a>
        
        <h1 class="site-title animated fadeIn"><a href="http://masterr.org">Become Great at R</a></h1>
		<h2 class="site-description animated fadeIn" itemprop="description"></h2>
	</div>
</header><!-- /.masthead -->

<div class="js-menu-screen menu-screen"></div>

<div id="main" role="main">
  <article class="hentry">
    
    <div class="entry-wrapper">
      <header class="entry-header">
        <span class="entry-tags"></span>
        
          <h1 class="entry-title">How to easily make stacked area chart with ezplot - Part 9</h1>
        
      </header>
      <footer class="entry-meta">
		<!-- Begin MailChimp Signup Form -->
<html>
<head>
<link href="//cdn-images.mailchimp.com/embedcode/classic-081711.css" rel="stylesheet" type="text/css">
<style type="text/css">
	#mc_embed_signup{background: #EBF2F2; clear:left; font:14px Helvetica,Arial,sans-serif; border: 1px solid #ccc; padding: 20px 15px; text-align: center}
    #mc_embed_signup input {
		background: #fff;
		border: 1px solid #ccc;
		font-size: 15px;
		margin-bottom: 10px;
		padding: 8px 10px;
		border-radius: 3px;
		-moz-border-radius: 3px;
		-webkit-border-radius: 3px;
		box-shadow: 0 2px 2px #ddd;
		-moz-box-shadow: 0 2px 2px #ddd;
		-webkit-box-shadow: 0 2px 2px #ddd
	}
	#mc_embed_signup input.name { background: #fff  no-repeat 10px center; padding-left: 5px }
	#mc_embed_signup input.email { background: #fff no-repeat 10px center; padding-left: 5px }
	#mc_embed_signup .button{ background: #217b30; -moz-border-radius: 8; font: 18px; color:#FFFFFF; }
	#mc_embed_signup .button:hover{ background: #217b30; color: #c6ffd1; }
	/* Add your own MailChimp form style overrides in your site stylesheet or in this style block.
	   We recommend moving this block and the preceding CSS link to the HEAD of your HTML file. */
</style>
</head>
<div id="mc_embed_signup">
<form action="//gmlang.us9.list-manage.com/subscribe/post?u=66768baba1811dbdb4e186167&amp;id=0288c18c07" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank">
    <div id="mc_embed_signup_scroll">
	<h2>Master R</h2>
<div class="mc-field-group">
	<label for="mce-FIRST_NAME">First Name </label>
	<input type="text" value="" name="FIRST_NAME" class="required name" id="mce-FIRST_NAME">
</div>
<div class="mc-field-group">
	<label for="mce-EMAIL">Email </label>
	<input type="email" value="" name="EMAIL" class="required email" id="mce-EMAIL">
    <input type="reset" id="chimp-reset-side" style="display:none"/>
</div>
	<div id="mce-responses" class="clear">
		<div class="response" id="mce-error-response" style="display:none"></div>
		<div class="response" id="mce-success-response" style="display:none"></div>
	</div>    <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
    <div style="position: absolute; left: -5000px;"><input type="text" name="b_66768baba1811dbdb4e186167_0288c18c07" tabindex="-1" value=""></div>
    <div class="clear"><input type="submit" value="Sign Up FREE!" name="subscribe" id="mc-embedded-subscribe" class="button side-clear"></div>
    </div>
</form>
</div>
</html>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script type="text/javascript">
    $(document).ready(function(){
	 	$(".side-clear").click(function() {
    		 setTimeout(function(){
				$('#chimp-reset-side').click();
    		 },1000); 
		});
    });
</script> 
<!--End mc_embed_signup-->
        <span class="entry-date date published"><time datetime="2015-08-09T00:00:00+09:00"><i class="fa fa-calendar-o"></i> August 09, 2015</time></span>
        
        
        <span class="author vcard">By <span class="fn">Guangming Lang</span></span>
		<span class="entry-comments"><i class="fa fa-comment-o"></i> <a href="#disqus_thread">Comment</a></span>
		<span class="social-share-twitter">
  <a href="https://twitter.com/intent/tweet?hashtags=&amp;text=How%20to%20easily%20make%20stacked%20area%20chart%20with%20ezplot%20-%20Part%209&amp;url=http://masterr.org/r/how-to-easily-make-stacked-area-chart-with-ezplot-part9/" title="Share on Twitter" itemprop="Twitter"><i class="fa fa-twitter-square"></i> Tweet</a>
</span>
<span class="social-share-facebook">
  <a href="https://www.facebook.com/sharer/sharer.php?u=http://masterr.org/r/how-to-easily-make-stacked-area-chart-with-ezplot-part9/" title="Share on Facebook" itemprop="Facebook"><i class="fa fa-facebook-square"></i> Like</a>
</span>
<span class="social-share-googleplus">
  <a href="https://plus.google.com/share?url=http://masterr.org/r/how-to-easily-make-stacked-area-chart-with-ezplot-part9/" title="Share on Google Plus" itemprop="GooglePlus"><i class="fa fa-google-plus-square"></i> +1</a>
</span>
<!-- /.social-share -->
        <div class="google-ads" style="margin-top:40px; text-align:center;">
  <script async src="http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- 160x600 ad -->
  <ins class="adsbygoogle"
       style="display:inline-block;width:160px;height:600px"
       data-ad-client="ca-pub-8728996999064894"
       data-ad-slot="7055819766"></ins>
  <script>
  (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div><!-- /.google-ads --><!-- /.google-ads -->
      </footer>
      <div class="entry-content">
        <p>Stacked area chart isn’t something I use often. However, I see Economists use it a lot. For example, if you open the book <a href="http://www.amazon.com/gp/product/067443000X/ref=as_li_tl?ie=UTF8&amp;camp=1789&amp;creative=9325&amp;creativeASIN=067443000X&amp;linkCode=as2&amp;tag=cabaceo-20&amp;linkId=VFX64EPFR3YKA7OG">Capital in the Twenty-First Century</a><img src="http://ir-na.amazon-adsystem.com/e/ir?t=cabaceo-20&amp;l=as2&amp;o=1&amp;a=067443000X" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" />, you’ll find many stacked area charts. By the way, it’s a thought-provoking book. A stacked area chart is the continuous analog of a stacked bar chart. We can use it to show how different components of the whole vary over time. The reason I don’t like it is because as you move up the stacks, it becomes increasingly hard to see the patterns. Therefore, it’s very important
to choose the order in which the different components are stacked. Nonetheless, I added a function <code class="highlighter-rouge">mk_areaplot()</code> to the ezplot package. This function can save you a lot of time in case you ever need to make a stacked area chart. Let’s see how to use it.</p>

<h4 id="prerequisites">Prerequisites</h4>
<ol>
  <li>Install a set of development tools
    <ul>
      <li>On Windows, download and install <a href="http://cran.r-project.org/bin/windows/Rtools/">Rtools</a>.</li>
      <li>On Mac, install the <a href="https://developer.apple.com/downloads">Xcode command line tools</a>.</li>
      <li>On Linux, install the R development package, usually called <strong>r-devel</strong> or <strong>r-base-dev</strong>.</li>
    </ul>
  </li>
  <li>Install devtools by running <code class="highlighter-rouge">install.packages("devtools")</code> in R.</li>
</ol>

<h4 id="install-and-load-ezplot">Install and Load ezplot</h4>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">devtools</span><span class="o">::</span><span class="n">install_github</span><span class="p">(</span><span class="s2">"gmlang/ezplot"</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">ezplot</span><span class="p">)</span><span class="w">

</span><span class="c1"># we also need to load the following libraries for some data wrangling
</span><span class="n">library</span><span class="p">(</span><span class="n">dplyr</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">tidyr</span><span class="p">)</span></code></pre></figure>

<p>The ezplot package includes a dataset of annual online advertising revenues between 2000 and 2014, broken down by 13 different revenue channels. We’ll make a stacked area chart to show how each type of revenue progressed from 2000 to 2014.</p>

<h4 id="first-we-need-to-change-the-data-to-long-format">First, we need to change the data to long format.</h4>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="c1"># original data
</span><span class="n">str</span><span class="p">(</span><span class="n">ads</span><span class="p">)</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-text" data-lang="text">## 'data.frame':	15 obs. of  13 variables:
##  $ year           : int  2014 2013 2012 2011 2010 2009 2008 2007 2006 2005 ...
##  $ search         : num  18.8 18.4 16.8 14.9 11.7 ...
##  $ mobile         : num  12.38 7.28 3.29 1.59 0.78 ...
##  $ banner         : num  7.92 8.13 7.69 6.66 5.98 4.99 4.91 4.45 3.72 2.5 ...
##  $ digital_video  : num  3.47 3 2.2 1.9 1.3 0.91 0.7 0.42 0 0 ...
##  $ classifieds    : num  2.48 2.57 2.56 2.54 2.6 2.27 3.28 3.39 3.04 2.13 ...
##  $ lead_generation: num  1.98 1.71 1.83 1.59 1.3 1.36 1.64 1.48 1.35 0.75 ...
##  $ rich_media     : num  1.49 1.28 1.1 1.27 1.56 1.59 1.64 1.7 1.18 1 ...
##  $ sponsorship    : num  0.99 0.86 0.73 1.27 0.78 0.45 0.47 0.64 0.51 0.63 ...
##  $ email          : num  0 0 0 0.32 0.26 0.23 0.47 0.42 0.34 0.25 ...
##  $ referals       : num  0 0 0 0 0 0 0 0 0 0 ...
##  $ slotting_fees  : num  0 0 0 0 0 0 0 0 0 0.13 ...
##  $ other          : num  0 0 0 0 0 0 0 0 0 0 ...</code></pre></figure>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="c1"># wide format to long format
</span><span class="n">dat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ads</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">gather</span><span class="p">(</span><span class="n">type</span><span class="p">,</span><span class="w"> </span><span class="n">rev</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="n">year</span><span class="p">)</span><span class="w">
</span><span class="n">str</span><span class="p">(</span><span class="n">dat</span><span class="p">)</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-text" data-lang="text">## 'data.frame':	180 obs. of  3 variables:
##  $ year: int  2014 2013 2012 2011 2010 2009 2008 2007 2006 2005 ...
##  $ type: Factor w/ 12 levels "search","mobile",..: 1 1 1 1 1 1 1 1 1 1 ...
##  $ rev : num  18.8 18.4 16.8 14.9 11.7 ...</code></pre></figure>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">head</span><span class="p">(</span><span class="n">dat</span><span class="p">)</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-text" data-lang="text">##   year   type   rev
## 1 2014 search 18.81
## 2 2013 search 18.40
## 3 2012 search 16.84
## 4 2011 search 14.90
## 5 2010 search 11.70
## 6 2009 search 10.67</code></pre></figure>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">tail</span><span class="p">(</span><span class="n">dat</span><span class="p">)</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-text" data-lang="text">##     year  type  rev
## 175 2005 other 0.00
## 176 2004 other 0.00
## 177 2003 other 0.00
## 178 2002 other 0.00
## 179 2001 other 0.00
## 180 2000 other 0.25</code></pre></figure>

<h4 id="next-we-can-easily-draw-a-stacked-area-chart-using-mk_areaplot">Next, we can easily draw a stacked area chart using <code class="highlighter-rouge">mk_areaplot()</code>.</h4>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">plt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mk_areaplot</span><span class="p">(</span><span class="n">dat</span><span class="p">)</span><span class="w">
</span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">plt</span><span class="p">(</span><span class="s2">"year"</span><span class="p">,</span><span class="w"> </span><span class="s2">"rev"</span><span class="p">,</span><span class="w"> </span><span class="n">fillby</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"type"</span><span class="p">,</span><span class="w"> </span><span class="n">ylab</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Revenue (in Billions of USD)"</span><span class="p">,</span><span class="w">
        </span><span class="n">main</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Internet Advertising Revenue"</span><span class="p">)</span><span class="w">

</span><span class="c1"># make x-axis look nice and use brewer colors instead of default
</span><span class="n">p</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">ggplot2</span><span class="o">::</span><span class="n">scale_x_continuous</span><span class="p">(</span><span class="n">limit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">2000</span><span class="p">,</span><span class="w"> </span><span class="m">2014</span><span class="p">),</span><span class="w">
                                </span><span class="n">breaks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">seq</span><span class="p">(</span><span class="m">2000</span><span class="p">,</span><span class="w"> </span><span class="m">2014</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">
        </span><span class="n">ggplot2</span><span class="o">::</span><span class="n">scale_fill_brewer</span><span class="p">(</span><span class="n">palette</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Set3"</span><span class="p">)</span></code></pre></figure>

<p><img src="/../figs/2015-08-09-how-to-easily-make-stacked-area-chart-with-ezplot-part9/unnamed-chunk-3-1.png" alt="center" /></p>

<p>We can also visualize the percentage of each revenue channel over the years.</p>

<h4 id="first-we-calculate-the-percentages-of-the-revenue-channels-for-each-year">First, we calculate the percentages of the revenue channels for each year.</h4>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">dat2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dat</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">group_by</span><span class="p">(</span><span class="n">year</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">mutate</span><span class="p">(</span><span class="n">total</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">sum</span><span class="p">(</span><span class="n">rev</span><span class="p">),</span><span class="w"> </span><span class="n">pct</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rev</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">total</span><span class="p">)</span><span class="w">
</span><span class="n">head</span><span class="p">(</span><span class="n">dat2</span><span class="p">)</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-text" data-lang="text">## Source: local data frame [6 x 5]
## Groups: year
## 
##   year   type   rev total       pct
## 1 2014 search 18.81 49.52 0.3798465
## 2 2013 search 18.40 43.23 0.4256303
## 3 2012 search 16.84 36.24 0.4646799
## 4 2011 search 14.90 32.04 0.4650437
## 5 2010 search 11.70 26.26 0.4455446
## 6 2009 search 10.67 22.47 0.4748554</code></pre></figure>

<h4 id="next-we-run-the-same-code-replacing-rev-by-pct">Next, we run the same code, replacing “rev” by “pct”.</h4>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">plt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mk_areaplot</span><span class="p">(</span><span class="n">dat2</span><span class="p">)</span><span class="w">
</span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">plt</span><span class="p">(</span><span class="s2">"year"</span><span class="p">,</span><span class="w"> </span><span class="s2">"pct"</span><span class="p">,</span><span class="w"> </span><span class="n">fillby</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"type"</span><span class="p">,</span><span class="w"> 
        </span><span class="n">main</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Percent of Overall Online Ads Revenue"</span><span class="p">)</span><span class="w">

</span><span class="c1"># change the y-axis to display percent instead of decimals
</span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">scale_axis</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="s2">"y"</span><span class="p">,</span><span class="w"> </span><span class="n">scale</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"pct"</span><span class="p">)</span><span class="w">
</span><span class="n">p</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">ggplot2</span><span class="o">::</span><span class="n">scale_x_continuous</span><span class="p">(</span><span class="n">limit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">2000</span><span class="p">,</span><span class="w"> </span><span class="m">2014</span><span class="p">),</span><span class="w"> 
                                </span><span class="n">breaks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">seq</span><span class="p">(</span><span class="m">2000</span><span class="p">,</span><span class="w"> </span><span class="m">2014</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">
        </span><span class="n">ggplot2</span><span class="o">::</span><span class="n">scale_fill_brewer</span><span class="p">(</span><span class="n">palette</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Set3"</span><span class="p">)</span></code></pre></figure>

<p><img src="/../figs/2015-08-09-how-to-easily-make-stacked-area-chart-with-ezplot-part9/unnamed-chunk-5-1.png" alt="center" /></p>

<p>I created ezplot because there are too many detailed commands to remember when making and customizing a ggplot. I hope ezplot can improve your productivity. If you enjoyed reading this post, please share it with your friends. I’m writing a book called ezplot: How to Easily Make ggplot2 Graphics for Data Analysis, and it is 20% complete. <a href="https://leanpub.com/ezplot">Read the sample chapters for FREE</a> and get notified when the book is published.</p>


		<!-- Begin MailChimp Signup Form -->
<html>
<head>
<link href="//cdn-images.mailchimp.com/embedcode/classic-081711.css" rel="stylesheet" type="text/css">
<style type="text/css">
	#mc_embed_signup{background: #EBF2F2; clear:left; font:14px Helvetica,Arial,sans-serif; border: 1px solid #ccc; padding: 20px 15px; text-align: center}
	#mc_embed_signup input {
		background: #fff;
		border: 1px solid #ccc;
		font-size: 15px;
		margin-bottom: 10px;
		padding: 8px 10px;
		border-radius: 3px;
		-moz-border-radius: 3px;
		-webkit-border-radius: 3px;
		box-shadow: 0 2px 2px #ddd;
		-moz-box-shadow: 0 2px 2px #ddd;
		-webkit-box-shadow: 0 2px 2px #ddd
	}
	#mc_embed_signup input.name { background: #fff  no-repeat 10px center; padding-left: 5px }
	#mc_embed_signup input.email { background: #fff no-repeat 10px center; padding-left: 5px }
	#mc_embed_signup .button{ background: #217b30; -moz-border-radius: 8; font: 18px; color:#FFFFFF; }
	#mc_embed_signup .button:hover{ background: #217b30; color: #c6ffd1; }
	/* Add your own MailChimp form style overrides in your site stylesheet or in this style block.
	   We recommend moving this block and the preceding CSS link to the HEAD of your HTML file. */
</style>
</head>
<div id="mc_embed_signup">
<form action="//gmlang.us9.list-manage.com/subscribe/post?u=66768baba1811dbdb4e186167&amp;id=0288c18c07" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank">
    <div id="mc_embed_signup_scroll">
	<h2>If you enjoyed this post, get updates. It's FREE</h2>
<div class="mc-field-group">
	<label for="mce-FIRST_NAME">Enter Your First Name </label>
	<input type="text" value="" name="FIRST_NAME" class="required name" id="mce-FIRST_NAME">
</div>
<div class="mc-field-group">
	<label for="mce-EMAIL">Enter Your Email </label>
	<input type="email" value="" name="EMAIL" class="required email" id="mce-EMAIL">
    <input type="reset" id="chimp-reset" style="display:none"/>
</div>
	<div id="mce-responses" class="clear">
		<div class="response" id="mce-error-response" style="display:none"></div>
		<div class="response" id="mce-success-response" style="display:none"></div>
	</div>    <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
    <div style="position: absolute; left: -5000px;"><input type="text" name="b_66768baba1811dbdb4e186167_0288c18c07" tabindex="-1" value=""></div>
    <div class="clear"><input type="submit" value="Get Updates!" name="subscribe" id="mc-embedded-subscribe" class="button bottom-clear"></div>
    </div>
</form>
</div>
</html>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script type="text/javascript">
    $(document).ready(function(){
	 	$(".bottom-clear").click(function() {
    		 setTimeout(function(){
				$('#chimp-reset').click();
    		 },1000); 
		});
    });
</script> 
<!--End mc_embed_signup-->
        <div id="disqus_thread"></div><!-- /#disqus_thread -->
      </div><!-- /.entry-content -->
    </div><!-- /.entry-wrapper -->
    <nav class="pagination" role="navigation">
      
        <a href="http://masterr.org/r/how-to-easily-make-beautiful-heatmaps-with-ezplot-part8/" class="btn" title="How to easily make beautiful heatmaps with ezplot - Part 8">Previous</a>
      
      
        <a href="http://masterr.org/r/functions-that-return-a-list-of-functions-and-lapply/" class="btn" title="Functions that return a list of functions and lapply">Next</a>
      
    </nav><!-- /.pagination -->
  </article>
</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo" class="entry-wrapper">
    
<span>&copy; 2017 Guangming Lang. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> using the <a href="http://mademistakes.com/so-simple/" rel="nofollow">So Simple Theme</a>.</span>
<div class="social-icons">
	
	
	
	
	
	
	
	
	
<!-- no feed button <a href="http://masterr.org/feed.xml" title="Atom/RSS feed"><i class="fa fa-rss-square fa-2x"></i></a> -->
</div><!-- /.social-icons -->

  </footer>
</div><!-- /.footer-wrapper -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="http://masterr.org/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="http://masterr.org/assets/js/scripts.min.js"></script>

<!-- Jekyll Simple Search option -->
<script>
  $(document).ready(function() {
      $('.search-field').jekyllSearch({
          jsonFile: 'http://masterr.org/search.json',
          searchResults: '.search-results',
          template: '<li><article><a href="{url}">{title} <span class="entry-date"><time datetime="{date}">{shortdate}</time></span></a></article></li>',
          fuzzy: true,
          noResults: '<p>Nothing found.</p>'
        });
  });

  (function( $, window, undefined ) {
    
     var bs = {
          close: $(".close-btn"),
          searchform: $(".search-form"),
          canvas: $(".js-menu-screen"),
          dothis: $('.dosearch')
      };
    
    bs.dothis.on('click', function() {
      $('.search-wrapper').css({ display: "block" });
      $('body').toggleClass('no-scroll');
      bs.searchform.toggleClass('active');
      bs.searchform.find('input').focus();
      bs.canvas.toggleClass('is-visible');
    });
    
      bs.close.on('click', function() {
        $('.search-wrapper').removeAttr( 'style' );
        $('body').toggleClass('no-scroll');
        bs.searchform.toggleClass('active');
        bs.canvas.removeClass('is-visible');
    });
  })( jQuery, window );
</script>


<!-- doesn't work optimally 
author's Asynchronous Google Analytics snippet

<script>
  var _gaq = _gaq || [];
  var pluginUrl = 
 '//www.google-analytics.com/plugins/ga/inpage_linkid.js';
  _gaq.push(['_require', 'inpage_linkid', pluginUrl]);
  _gaq.push(['_setAccount', 'UA-57697212-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'stats.g.doubleclick.net/dc.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

-->

<!-- google analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-57697212-1', 'auto');
  ga('send', 'pageview');

</script>


  
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'masterrorg'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>



<!-- Mathjax -->
<script type="text/javascript"
    src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
	        

</body>
</html>
