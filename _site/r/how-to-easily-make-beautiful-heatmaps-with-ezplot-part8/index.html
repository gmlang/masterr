<!DOCTYPE html>
<!--
    So Simple Jekyll Theme 3.2.0
    Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes
    Free for personal and commercial use under the MIT license
    https://github.com/mmistakes/so-simple-theme/blob/master/LICENSE
-->
<html lang="en-US" class="no-js">
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  

  
    
    <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>How to easily make beautiful heatmaps with ezplot - Part 8 | Become Great at R</title>
<meta name="generator" content="Jekyll v3.9.2" />
<meta property="og:title" content="How to easily make beautiful heatmaps with ezplot - Part 8" />
<meta name="author" content="Guangming Lang" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Updated October 4, 2018" />
<meta property="og:description" content="Updated October 4, 2018" />
<link rel="canonical" href="http://localhost:4000/r/how-to-easily-make-beautiful-heatmaps-with-ezplot-part8/" />
<meta property="og:url" content="http://localhost:4000/r/how-to-easily-make-beautiful-heatmaps-with-ezplot-part8/" />
<meta property="og:site_name" content="Become Great at R" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2015-07-30T00:00:00+09:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="How to easily make beautiful heatmaps with ezplot - Part 8" />
<meta name="twitter:site" content="@" />
<meta name="twitter:creator" content="@Guangming Lang" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Guangming Lang"},"dateModified":"2015-07-30T00:00:00+09:00","datePublished":"2015-07-30T00:00:00+09:00","description":"Updated October 4, 2018","headline":"How to easily make beautiful heatmaps with ezplot - Part 8","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/r/how-to-easily-make-beautiful-heatmaps-with-ezplot-part8/"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://localhost:4000/images/site-logo.png"},"name":"Guangming Lang"},"url":"http://localhost:4000/r/how-to-easily-make-beautiful-heatmaps-with-ezplot-part8/"}</script>
<!-- End Jekyll SEO tag -->


  

  <script>
    /* Cut the mustard */
    if ( 'querySelector' in document && 'addEventListener' in window ) {
      document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + 'js';
    }
  </script>

  <link rel="stylesheet" href="/assets/css/main.css">
  <link rel="stylesheet" href="/assets/css/skins/default.css">
  
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,400i,700,700i|Lora:400,400i,700,700i">
  <link rel="alternate" type="application/atom+xml" title="Become Great at R" href="/atom.xml">
<!-- start custom head snippets -->

<!-- insert favicons. use http://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

</head>


  <body class="layout--post  how-to-easily-make-beautiful-heatmaps-with-ezplot-part-8">
    <nav class="skip-links">
  <h2 class="screen-reader-text">Skip links</h2>
  <ul>
    <li><a href="#primary-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    
  <div class="navigation-wrapper">
    <a href="#menu-toggle" id="menu-toggle">Menu</a>
    <nav id="primary-nav" class="site-nav animated drop">
      <ul><li><a href="/about/">About</a></li><li><a href="/r/">R</a></li><li><a href="/da/">Data Analysis</a></li><li><a href="/books/">Books</a></li><li><a href="/apps/">Apps</a></li><li><a href="/cartoon/">Cartoon</a></li></ul>
    </nav>
  </div><!-- /.navigation-wrapper -->


    <header class="masthead">
  <div class="wrap">
    
      <a href="/" class="site-logo" rel="home" title="Become Great at R">
        <img src="/images/site-logo.png" class="site-logo-img animated fadeInDown" alt="Become Great at R">
      </a>
    
    
    
      
        <div class="site-title animated fadeIn"><a href="/">Become Great at R</a></div>
      
      <p class="site-description animated fadeIn" itemprop="description">Master the R programming language</p>
    
  </div>
</header><!-- /.masthead -->


    <main id="main" class="main-content" aria-label="Content">
  <article class="h-entry">
    

    <div class="page-wrapper">
      <header class="page-header">
        
        
          <h1 id="page-title" class="page-title p-name">How to easily make beautiful heatmaps with ezplot - Part 8
</h1>
        
      </header>

      <div class="page-sidebar">
        <div class="page-author h-card p-author"><div class="author-info"><div class="author-name">
        <em>by</em> <span class="p-name">Guangming Lang</span>
      </div><ul class="author-links"><li class="author-link">
            <a class="u-url" rel="me" href="https://cabaceo.com/"><i class="fas fa-link fa-lg" title="Data Scientist"></i></a>
          </li></ul>

<span class="read-time">4 min read</span>

    <time class="page-date dt-published" datetime="2015-07-30T00:00:00+09:00"><a class="u-url" href="">July 30, 2015</a>
</time>

  </div>
</div>
        
  <h3 class="page-taxonomies-title">Categories</h3>
  
  <ul class="page-taxonomies"><li class="page-taxonomy">r</li>
  </ul>

<div class="google-ads" style="margin-top:40px; text-align:center;">
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- 160x600 ad -->
  <ins class="adsbygoogle"
       style="display:inline-block;width:160px;height:600px"
       data-ad-client="ca-pub-8728996999064894"
       data-ad-slot="7055819766"></ins>
  <script>
  (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div><!-- /.google-ads --> <!-- /.google-ads -->
        

      </div>

      <div class="page-content">
        <div class="e-content">
          <h3 id="updated-october-4-2018">Updated October 4, 2018</h3>

<p>In this post, we’ll look at how to make effective heatmaps using ezplot. We’ll 
use a dataset of NBA players’ statistics from flowingdata.com. Make sure you 
first install ezplot by running the command <code class="language-plaintext highlighter-rouge">devtools::install_github("gmlang/ezplot")</code>.</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">library</span><span class="p">(</span><span class="n">ezplot</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">dplyr</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">tidyr</span><span class="p">)</span></code></pre></figure>

<p>Let’s get the data. Notice we pass the url directly to <code class="language-plaintext highlighter-rouge">read.csv()</code>.</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">nba</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">read.csv</span><span class="p">(</span><span class="s2">"http://datasets.flowingdata.com/ppg2008.csv"</span><span class="p">)</span><span class="w">
</span><span class="c1"># examine the variables</span><span class="w">
</span><span class="n">str</span><span class="p">(</span><span class="n">nba</span><span class="p">)</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-text" data-lang="text">## 'data.frame':	50 obs. of  21 variables:
##  $ Name: Factor w/ 50 levels "Al Harrington ",..: 21 31 29 19 15 27 28 2 13 9 ...
##  $ G   : int  79 81 82 81 67 74 51 50 78 66 ...
##  $ MIN : num  38.6 37.7 36.2 37.7 36.2 39 38.2 36.6 38.5 34.5 ...
##  $ PTS : num  30.2 28.4 26.8 25.9 25.8 25.3 24.6 23.1 22.8 22.8 ...
##  $ FGM : num  10.8 9.7 9.8 9.6 8.5 8.9 6.7 9.7 8.1 8.1 ...
##  $ FGA : num  22 19.9 20.9 20 19.1 18.8 15.9 19.5 16.1 18.3 ...
##  $ FGP : num  0.491 0.489 0.467 0.479 0.447 0.476 0.42 0.497 0.503 0.443 ...
##  $ FTM : num  7.5 7.3 5.9 6 6 6.1 9 3.7 5.8 5.6 ...
##  $ FTA : num  9.8 9.4 6.9 6.7 6.9 7.1 10.3 5 6.7 7.1 ...
##  $ FTP : num  0.765 0.78 0.856 0.89 0.878 0.863 0.867 0.738 0.868 0.793 ...
##  $ X3PM: num  1.1 1.6 1.4 0.8 2.7 1.3 2.3 0 0.8 1 ...
##  $ X3PA: num  3.5 4.7 4.1 2.1 6.7 3.1 5.4 0.1 2.3 2.6 ...
##  $ X3PP: num  0.317 0.344 0.351 0.359 0.404 0.422 0.415 0 0.364 0.371 ...
##  $ ORB : num  1.1 1.3 1.1 1.1 0.7 1 0.6 3.4 0.9 1.6 ...
##  $ DRB : num  3.9 6.3 4.1 7.3 4.4 5.5 3 7.5 4.7 5.2 ...
##  $ TRB : num  5 7.6 5.2 8.4 5.1 6.5 3.6 11 5.5 6.8 ...
##  $ AST : num  7.5 7.2 4.9 2.4 2.7 2.8 2.7 1.6 11 3.4 ...
##  $ STL : num  2.2 1.7 1.5 0.8 1 1.3 1.2 0.8 2.8 1.1 ...
##  $ BLK : num  1.3 1.1 0.5 0.8 1.4 0.7 0.2 1.7 0.1 0.4 ...
##  $ TO  : num  3.4 3 2.6 1.9 2.5 3 2.9 1.8 3 3 ...
##  $ PF  : num  2.3 1.7 2.3 2.2 3.1 1.8 2.3 2.8 2.7 3 ...</code></pre></figure>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="c1"># look at the first 5 rows and 8 columns</span><span class="w">
</span><span class="n">nba</span><span class="p">[</span><span class="m">1</span><span class="o">:</span><span class="m">5</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="o">:</span><span class="m">8</span><span class="p">]</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-text" data-lang="text">##             Name  G  MIN  PTS  FGM  FGA   FGP FTM
## 1   Dwyane Wade  79 38.6 30.2 10.8 22.0 0.491 7.5
## 2  LeBron James  81 37.7 28.4  9.7 19.9 0.489 7.3
## 3   Kobe Bryant  82 36.2 26.8  9.8 20.9 0.467 5.9
## 4 Dirk Nowitzki  81 37.7 25.9  9.6 20.0 0.479 6.0
## 5 Danny Granger  67 36.2 25.8  8.5 19.1 0.447 6.0</code></pre></figure>

<p>The variable <code class="language-plaintext highlighter-rouge">Name</code> has the names of the NBA players. By default, it’s treated 
by R as a Factor with levels ordered alphabetically. Reorder its levels by 
points scored.</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">nba</span><span class="o">$</span><span class="n">Name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">with</span><span class="p">(</span><span class="n">nba</span><span class="p">,</span><span class="w"> </span><span class="n">reorder</span><span class="p">(</span><span class="n">Name</span><span class="p">,</span><span class="w"> </span><span class="n">PTS</span><span class="p">))</span></code></pre></figure>

<p>The other variables are various performance statistics. Before we can make a 
heat map, we need to put the data in the long format. In other words, we need to 
gather the names of the statistics in one column, and their values in another column.</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">nba_m</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nba</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">gather</span><span class="p">(</span><span class="n">stats</span><span class="p">,</span><span class="w"> </span><span class="n">val</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="n">Name</span><span class="p">)</span><span class="w">
</span><span class="n">head</span><span class="p">(</span><span class="n">nba_m</span><span class="p">)</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-text" data-lang="text">##             Name stats val
## 1   Dwyane Wade      G  79
## 2  LeBron James      G  81
## 3   Kobe Bryant      G  82
## 4 Dirk Nowitzki      G  81
## 5 Danny Granger      G  67
## 6  Kevin Durant      G  74</code></pre></figure>

<p>We also want to scale the values of each performance statistics so that they are 
between 0 and 1.</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">dat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nba_m</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">group_by</span><span class="p">(</span><span class="n">stats</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">mutate</span><span class="p">(</span><span class="n">val_scaled</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">scales</span><span class="o">::</span><span class="n">rescale</span><span class="p">(</span><span class="n">val</span><span class="p">))</span><span class="w">
</span><span class="n">head</span><span class="p">(</span><span class="n">dat</span><span class="p">)</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-text" data-lang="text">## # A tibble: 6 x 4
## # Groups:   stats [1]
##   Name             stats   val val_scaled
##   &lt;fct&gt;            &lt;chr&gt; &lt;dbl&gt;      &lt;dbl&gt;
## 1 "Dwyane Wade "   G        79      0.947
## 2 "LeBron James "  G        81      0.982
## 3 "Kobe Bryant "   G        82      1    
## 4 "Dirk Nowitzki " G        81      0.982
## 5 "Danny Granger " G        67      0.737
## 6 "Kevin Durant "  G        74      0.860</code></pre></figure>

<p>With all these data prep work done, we’re ready to make a heatmap. This is super 
easy with ezplot.</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">plt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mk_heatmap</span><span class="p">(</span><span class="n">dat</span><span class="p">)</span><span class="w">
</span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">plt</span><span class="p">(</span><span class="s2">"stats"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Name"</span><span class="p">,</span><span class="w"> </span><span class="s2">"val_scaled"</span><span class="p">)</span><span class="w">
</span><span class="n">rotate_axis_text</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="m">90</span><span class="p">,</span><span class="w"> </span><span class="n">vjust_x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.5</span><span class="p">)</span></code></pre></figure>

<p><img src="/../figs/2015-07-30-how-to-easily-make-beautiful-heatmaps-with-ezplot-part8/unnamed-chunk-6-1.png" alt="center" /></p>

<p>Not it’s your turn. Make a heat map using the unscaled values, and compare it 
with the scaled version. You will see they are very different. The scaled 
version is the mathematically correct one.</p>

<p>This is the last post in the ezplot how-to series. If you’ve enjoyed it, 
tell your friend about it. If you want to learn more about how to use
ezplot, you can get my book <a href="https://leanpub.com/ezplot">here</a>.</p>


        </div>

        
          <div class="page-share">
  <a href="https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Flocalhost%3A4000%2Fr%2Fhow-to-easily-make-beautiful-heatmaps-with-ezplot-part8%2F" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" class="btn btn--facebook btn--small"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i> <span>Share</span></a>
  <a href="https://twitter.com/intent/tweet?text=How+to+easily+make+beautiful+heatmaps+with+ezplot+-+Part+8%20http%3A%2F%2Flocalhost%3A4000%2Fr%2Fhow-to-easily-make-beautiful-heatmaps-with-ezplot-part8%2F" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" class="btn btn--twitter btn--small"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i> <span>Tweet</span></a>
  <a href="https://www.linkedin.com/shareArticle?mini=true&url=http%3A%2F%2Flocalhost%3A4000%2Fr%2Fhow-to-easily-make-beautiful-heatmaps-with-ezplot-part8%2F" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" class="btn btn--linkedin btn--small"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i> <span>LinkedIn</span></a>
  <a href="https://reddit.com/submit?title=How+to+easily+make+beautiful+heatmaps+with+ezplot+-+Part+8&url=http%3A%2F%2Flocalhost%3A4000%2Fr%2Fhow-to-easily-make-beautiful-heatmaps-with-ezplot-part8%2F" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" class="btn btn--reddit btn--small"><i class="fab fa-fw fa-reddit" aria-hidden="true"></i> <span>Reddit</span></a>
</div>
<div class="google-ads" style="margin:10px 0;">
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- 320x50 ad -->
  <ins class="adsbygoogle"
       style="display:inline-block;width:320px;height:50px"
       data-ad-client="ca-pub-8728996999064894"
       data-ad-slot="7055819766"></ins>
  <script>
  (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div><!-- /.google-ads --> <!-- /.google-ads -->
        

        

        <nav class="page-pagination" role="navigation">
  
    <a class="page-previous" href="/r/how-to-easily-make-ggplot2-line-plot-ezplot-part6/">
      <h4 class="page-pagination-label">Previous</h4>
      <span class="page-pagination-title">
        <i class="fas fa-arrow-left"></i> How to easily make ggplot2 type of line plot, ezplot - Part 6

      </span>
    </a>
  

  
    <a class="page-next" href="/r/functions-that-return-a-list-of-functions-and-lapply/">
      <h4 class="page-pagination-label">Next</h4>
      <span class="page-pagination-title">
        Functions that return a list of functions and lapply
 <i class="fas fa-arrow-right"></i>
      </span>
    </a>
  
</nav>

      </div>
    </div>
  </article>
</main>


    <div class="google-ads" style="margin:10px 0;">
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- 320x50 ad -->
  <ins class="adsbygoogle"
       style="display:inline-block;width:320px;height:50px"
       data-ad-client="ca-pub-8728996999064894"
       data-ad-slot="7055819766"></ins>
  <script>
  (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div><!-- /.google-ads --> <!-- /.google-ads -->
<footer id="footer" class="site-footer">
  <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
<div class="social-icons"><a class="social-icon" href="/atom.xml"><i class="fas fa-rss-square fa-2x" title="Feed"></i></a></div><div class="copyright">
    
      <p>&copy; 2022 Become Great at R. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://github.com/mmistakes/so-simple-theme" rel="nofollow">So Simple</a>.</p>
    
  </div>
</footer>
<div class="google-ads" style="margin:10px 0;">
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- 320x50 ad -->
  <ins class="adsbygoogle"
       style="display:inline-block;width:320px;height:50px"
       data-ad-client="ca-pub-8728996999064894"
       data-ad-slot="7055819766"></ins>
  <script>
  (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div><!-- /.google-ads --> <!-- /.google-ads -->
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
  <script src="/assets/js/main.min.js"></script>
  <script src="https://use.fontawesome.com/releases/v5.0.12/js/all.js"></script>


<!-- MathJax -->

<script>
// http://docs.mathjax.org/en/latest/upgrading/v2.html
MathJax = {
  tex: {
      tags: "ams"    // eq numbering options: none, ams, all
  },
  options: {
    renderActions: {
      // for mathjax 3, handle <script "math/tex"> blocks inserted by kramdown
      find: [10, function (doc) {
        for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
          const display = !!node.type.match(/; *mode=display/);
          const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
          const text = document.createTextNode('');
          node.parentNode.replaceChild(text, node);
          math.start = {node: text, delim: '', n: 0};
          math.end = {node: text, delim: '', n: 0};
          doc.math.push(math);
        }
      }, '']
    }
  }
}
</script>

<script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>

  </body>

</html>
